/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014
 * @package yii2-editable
 * @version 1.0.0
 *
 * Editable Extension jQuery plugin
 *
 * Built for Yii Framework 2.0
 * Author: Kartik Visweswaran
 * Year: 2014
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){var e=function(e,i){return null===e||void 0===e||e==[]||""===e||i&&""===t.trim(e)},i=function(e,i){this.$element=t(e),this.init(i),this.listen()};i.prototype={constructor:i,init:function(e){var i=this;i.$container=t("#"+e.containerId),i.$form=i.$container.find(".kv-editable-form"),i.$value=i.$container.find(".kv-editable-value"),i.$popover=i.$container.find(".kv-editable-popover"),i.$btnSubmit=i.$container.find(".kv-editable-submit"),i.$btnReset=i.$container.find(".kv-editable-reset"),i.$loading=i.$container.find(".kv-editable-loading"),i.valueIfNull=e.valueIfNull},listen:function(){var i=this,n=i.$form,o=i.$btnSubmit,a=i.$btnReset,r=n.parent(),l=i.$popover,u=i.$loading;a.on("click",function(){setTimeout(function(){n[0].reset()},200)}),n.on("reset",function(){setTimeout(function(){n.data("kvEditableSubmit",!1),l.popoverX("show")},200)}),o.on("click",function(){r.addClass("kv-editable-processing"),u.show(),setTimeout(function(){n.submit()},200)}),n.on("submit",function(o){var a="",s=i.$form.data("yiiActiveForm"),d=i.valueIfNull;t.ajax({type:n.attr("method"),url:n.attr("action"),data:n.serialize(),success:function(o){if(n.find(".help-block").each(function(){a=t(this).text(),e(a.trim())||(u.hide(),l.popoverX("show"))}),e(a.trim())){var c=e(o.output)?i.$element.val():o.output;e(c)&&(c=d),u.hide(),l.popoverX("hide"),i.$value.html(c),n.yiiActiveForm("destroy"),n.yiiActiveForm(s.attributes,s.settings)}r.removeClass("kv-editable-processing")}}),o.preventDefault()})}},t.fn.editable=function(e){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var o=t(this),a=o.data("editable"),r="object"==typeof e&&e;a||o.data("editable",a=new i(this,t.extend({},t.fn.editable.defaults,r,t(this).data()))),"string"==typeof e&&a[e].apply(a,n)})},t.fn.editable.defaults={containerId:"",valueIfNull:"<em>(not set)</em>"}}(window.jQuery);